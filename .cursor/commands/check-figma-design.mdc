---
title: 'Check Figma Design'
description: 'Vollst√§ndige Figma-Analyse mit intelligenter Kategorisierung aller Komponenten'
---

## üéØ Ziel
ALLE Komponenten aus Figma erfassen und intelligent kategorisieren:
- Navbar-Komponenten ‚Üí f√ºr Globals
- Footer-Komponenten ‚Üí f√ºr Globals  
- Header/Hero-Komponenten ‚Üí f√ºr Heroes
- Alle anderen ‚Üí f√ºr Blocks

---

## üîç Workflow

### Schritt 1: Figma-Verbindung pr√ºfen

```typescript
// 1. Teste MCP-Verbindung
const figmaConnection = await checkFigmaConnection()

if (!figmaConnection.success) {
  throw new Error('‚ùå Figma MCP Server nicht erreichbar. Pr√ºfe .env.local und MCP-Config.')
}

console.log('‚úÖ Figma MCP Server verbunden')
console.log(`   - File Key: ${FIGMA_FILE_KEY}`)
console.log(`   - Access Token: ${FIGMA_ACCESS_TOKEN ? '‚úì' : '‚úó'}`)
```

---

### Schritt 2: Vollst√§ndiger File-Scan

```typescript
// 2. Lade GESAMTES Figma-File
const figmaFile = await mcp.getFigmaFile({
  fileKey: FIGMA_FILE_KEY,
  depth: 'full',
  includeComponents: true,
  includeInstances: true,
})

console.log('üìä Figma-File geladen:')
console.log(`   - Name: ${figmaFile.name}`)
console.log(`   - Version: ${figmaFile.version}`)
console.log(`   - Seiten: ${figmaFile.document.children.length}`)
```

---

### Schritt 3: Komponenten erfassen

```typescript
// 3. Sammle ALLE Komponenten
const allComponents = []

for (const page of figmaFile.document.children) {
  console.log(`\nüìÑ Scanne Seite: ${page.name}`)
  
  function collectComponents(node, depth = 0, parentPath = []) {
    const currentPath = [...parentPath, node.name]
    
    // Alle relevanten Node-Typen
    const relevantTypes = [
      'COMPONENT',
      'COMPONENT_SET',
      'INSTANCE',
      'FRAME'
    ]
    
    if (relevantTypes.includes(node.type) && depth <= 3) {
      allComponents.push({
        id: node.id,
        name: node.name,
        type: node.type,
        page: page.name,
        path: currentPath.join(' > '),
        depth: depth,
        visible: node.visible !== false,
        boundingBox: node.absoluteBoundingBox,
        layoutMode: node.layoutMode,
        componentId: node.componentId,
        childrenCount: node.children?.length || 0,
      })
    }
    
    // Rekursiv durch Kinder
    if (node.children && depth < 3) {
      node.children.forEach(child => 
        collectComponents(child, depth + 1, currentPath)
      )
    }
  }
  
  collectComponents(page, 0, [page.name])
}

console.log(`\n‚úÖ ${allComponents.length} Komponenten erfasst!`)
```

---

### Schritt 4: Intelligente Kategorisierung

```typescript
// 4. Kategorisiere nach Pattern-Matching
const categorized = {
  Navbar: [],
  Footer: [],
  Hero: [],
  Layout: [],
  CTA: [],
  Testimonials: [],
  Contact: [],
  Pricing: [],
  Gallery: [],
  Team: [],
  MultistepForms: [],
  Banners: [],
  FAQ: [],
  Timelines: [],
  Comparison: [],
  ContactModal: [],
  EventHeaderItems: [],
  EventHeaders: [],
  Logo: [],
  Loader: [],
  Uncategorized: [],
}

// Pattern-Definitionen
const categoryPatterns = {
  // WICHTIG: Diese Komponenten werden NICHT als Blocks generiert!
  Navbar: [
    /\bnav(bar)?\b/i,
    /\bnavigation\b/i,
    /\bmenu\b/i,
    /\bheader.*nav/i,
    /\btop.*bar\b/i
  ],
  
  Footer: [
    /\bfooter\b/i,
    /\bfu√üzeile\b/i,
    /\bbottom.*bar\b/i
  ],
  
  // Header = Hero!
  Hero: [
    /\bheader\b/i,
    /\bhero\b/i,
    /\bbanner(?!s)\b/i,  // Banner singular = Hero, Banners plural = Notification
    /\bmain.*header\b/i,
    /\bpage.*header\b/i
  ],
  
  // Alle anderen f√ºr Blocks
  Layout: [/\blayout\b/i, /\bgrid\b/i, /\bcontainer\b/i, /\bsection\b/i],
  CTA: [/\bcta\b/i, /\bcall.*action\b/i, /\bbutton.*section\b/i],
  Testimonials: [/\btestimonial\b/i, /\breview\b/i, /\brating\b/i],
  Contact: [/\bcontact\b/i, /\bkontakt\b/i],
  Pricing: [/\bpric(e|ing)\b/i, /\bplan\b/i, /\bpackage\b/i],
  Gallery: [/\bgallery\b/i, /\bgalerie\b/i, /\bimage.*grid\b/i],
  Team: [/\bteam\b/i, /\bmember\b/i, /\bmitarbeiter\b/i],
  MultistepForms: [/\bform\b/i, /\bwizard\b/i, /\bmulti.*step\b/i],
  Banners: [/\bbanners\b/i, /\bannouncement\b/i, /\bnotification\b/i],
  FAQ: [/\bfaq\b/i, /\bquestion\b/i, /\bfragen\b/i],
  Timelines: [/\btimeline\b/i, /\bzeitstrahl\b/i, /\bhistory\b/i],
  Comparison: [/\bcompar(e|ison)\b/i, /\bvergleich\b/i],
  ContactModal: [/\bmodal\b/i, /\bpopup\b/i, /\bdialog\b/i],
  EventHeaderItems: [/\bevent.*header.*item/i],
  EventHeaders: [/\bevent.*header\b/i],
  Logo: [/\blogo\b/i, /\bbrand\b/i],
  Loader: [/\bload(er|ing)\b/i, /\bspinner\b/i, /\bskeleton\b/i],
}

// Kategorisierung durchf√ºhren
for (const component of allComponents) {
  const name = component.name
  let matched = false
  
  for (const [category, patterns] of Object.entries(categoryPatterns)) {
    for (const pattern of patterns) {
      if (pattern.test(name)) {
        categorized[category].push(component)
        matched = true
        break
      }
    }
    if (matched) break
  }
  
  if (!matched) {
    categorized.Uncategorized.push(component)
  }
}

// Ausgabe
console.log('\nüìä Komponenten nach Kategorie:')
console.log('‚ïê'.repeat(80))

const sortedCategories = Object.entries(categorized)
  .filter(([_, items]) => items.length > 0)
  .sort((a, b) => b[1].length - a[1].length)

for (const [category, items] of sortedCategories) {
  const icon = ['Navbar', 'Footer', 'Hero'].includes(category) ? 'üéØ' : 'üì¶'
  const note = ['Navbar', 'Footer', 'Hero'].includes(category) ? ' (KEIN Block!)' : ''
  
  console.log(`\n${icon} ${category} (${items.length} Komponenten)${note}:`)
  
  items.slice(0, 5).forEach(comp => {
    console.log(`   - ${comp.name} (${comp.page})`)
  })
  
  if (items.length > 5) {
    console.log(`   ... und ${items.length - 5} weitere`)
  }
}

// Warnung f√ºr unkategorisierte
if (categorized.Uncategorized.length > 0) {
  console.warn(`\n‚ö†Ô∏è ${categorized.Uncategorized.length} unkategorisierte Komponenten:`)
  categorized.Uncategorized.slice(0, 10).forEach(comp => {
    console.log(`   - ${comp.name} (${comp.page})`)
  })
}
```

---

### Schritt 5: Export Inventar

```typescript
// 5. Exportiere vollst√§ndiges Inventar
const inventory = {
  meta: {
    generatedAt: new Date().toISOString(),
    figmaFileKey: FIGMA_FILE_KEY,
    figmaFileName: figmaFile.name,
    figmaVersion: figmaFile.version,
    totalComponents: allComponents.length,
  },
  
  // Alle Komponenten
  allComponents,
  
  // Kategorisiert
  categorized: Object.entries(categorized)
    .filter(([_, items]) => items.length > 0)
    .reduce((acc, [key, value]) => {
      acc[key] = value
      return acc
    }, {}),
  
  // Statistiken
  statistics: {
    byCategory: Object.entries(categorized)
      .filter(([_, items]) => items.length > 0)
      .map(([category, items]) => ({
        category,
        count: items.length,
        isBlock: !['Navbar', 'Footer', 'Hero'].includes(category),
      }))
      .sort((a, b) => b.count - a.count),
    
    generationPlan: {
      navbarComponents: categorized.Navbar.length,
      footerComponents: categorized.Footer.length,
      heroComponents: categorized.Hero.length,
      blockComponents: Object.entries(categorized)
        .filter(([cat, _]) => !['Navbar', 'Footer', 'Hero', 'Uncategorized'].includes(cat))
        .reduce((sum, [_, items]) => sum + items.length, 0),
    },
  },
}

await fs.writeFile(
  'FIGMA_INVENTORY.json',
  JSON.stringify(inventory, null, 2)
)

// Markdown-Dokumentation
const markdown = `
# Figma Design - Komponenten-Inventar

**Generiert:** ${inventory.meta.generatedAt}
**Figma File:** ${inventory.meta.figmaFileName}
**Version:** ${inventory.meta.figmaVersion}

---

## üìä √úbersicht

- **Gesamt erfasste Komponenten:** ${inventory.meta.totalComponents}
- **Kategorien:** ${Object.keys(categorized).filter(k => categorized[k].length > 0).length}

---

## üéØ Generierungs-Plan

### Navbar (Globals):
- **Anzahl:** ${inventory.statistics.generationPlan.navbarComponents}
- **Ziel:** \`src/Header/\` (DesktopNav + MobileNav)
- **Typ:** Payload Global Config

### Footer (Globals):
- **Anzahl:** ${inventory.statistics.generationPlan.footerComponents}
- **Ziel:** \`src/Footer/\` (DesktopFooter + MobileFooter)
- **Typ:** Payload Global Config

### Heroes:
- **Anzahl:** ${inventory.statistics.generationPlan.heroComponents}
- **Ziel:** \`src/heros/Hero1/\`, \`Hero2/\`, etc.
- **Typ:** Heroes mit conditional fields

### Blocks:
- **Anzahl:** ${inventory.statistics.generationPlan.blockComponents}
- **Ziel:** \`src/blocks/{Category}/{BlockName}/\`
- **Typ:** PayloadCMS Blocks

---

## üì¶ Komponenten nach Kategorie

${Object.entries(categorized)
  .filter(([_, items]) => items.length > 0)
  .sort((a, b) => b[1].length - a[1].length)
  .map(([category, items]) => {
    const icon = ['Navbar', 'Footer', 'Hero'].includes(category) ? 'üéØ' : 'üì¶'
    const type = ['Navbar', 'Footer'].includes(category) 
      ? 'Global Config' 
      : category === 'Hero' 
        ? 'Heroes (conditional fields)' 
        : 'PayloadCMS Blocks'
    
    return `### ${icon} ${category} (${items.length}) ‚Üí ${type}\n\n` +
      items.slice(0, 10).map(c => 
        `- **${c.name}** (${c.page})`
      ).join('\n') +
      (items.length > 10 ? `\n\n... und ${items.length - 10} weitere` : '')
  }).join('\n\n')}

---

## üöÄ N√§chste Schritte

1. **Design Rework**
   \`\`\`bash
   cursor> Design Rework from Figma
   \`\`\`

2. **Button Design**
   \`\`\`bash
   cursor> Style Buttons from Figma
   \`\`\`

3. **Navbar generieren**
   \`\`\`bash
   cursor> Build Navbar from Figma
   \`\`\`

4. **Footer generieren**
   \`\`\`bash
   cursor> Build Footer from Figma
   \`\`\`

5. **Heroes generieren**
   \`\`\`bash
   cursor> Generate Heroes from Figma
   \`\`\`

6. **Blocks generieren**
   \`\`\`bash
   cursor> Generate Blocks from Figma
   \`\`\`

---

**Vollst√§ndiges Inventar:** \`FIGMA_INVENTORY.json\`
`

await fs.writeFile('FIGMA_COMPONENTS_CATEGORIZED.md', markdown)

console.log('\n‚úÖ Inventar exportiert:')
console.log('   - FIGMA_INVENTORY.json')
console.log('   - FIGMA_COMPONENTS_CATEGORIZED.md')
```

---

## üéâ Erfolgsmeldung

```typescript
console.log('\n' + '='.repeat(80))
console.log('üéØ FIGMA CHECK ABGESCHLOSSEN!')
console.log('='.repeat(80))
console.log(`
üìä Zusammenfassung:
   ‚úÖ ${allComponents.length} Komponenten erfasst
   ‚úÖ ${Object.keys(categorized).filter(k => categorized[k].length > 0).length} Kategorien erkannt
   
üéØ Generierungs-Plan:
   - Navbar: ${inventory.statistics.generationPlan.navbarComponents} ‚Üí Globals (Mobile + Desktop)
   - Footer: ${inventory.statistics.generationPlan.footerComponents} ‚Üí Globals (Mobile + Desktop)
   - Heroes: ${inventory.statistics.generationPlan.heroComponents} ‚Üí /src/heros/ (conditional fields)
   - Blocks: ${inventory.statistics.generationPlan.blockComponents} ‚Üí /src/blocks/

üìÑ Dokumentation:
   - FIGMA_INVENTORY.json
   - FIGMA_COMPONENTS_CATEGORIZED.md

üöÄ N√§chster Schritt:
   cursor> Design Rework from Figma
`)
console.log('='.repeat(80))
```

---

## ‚úÖ Checkliste

Nach diesem Command pr√ºfen:

- [ ] `FIGMA_INVENTORY.json` existiert
- [ ] Alle Navbar-Komponenten in Kategorie "Navbar"
- [ ] Alle Footer-Komponenten in Kategorie "Footer"
- [ ] Alle Header/Hero-Komponenten in Kategorie "Hero"
- [ ] Alle anderen in entsprechenden Block-Kategorien
- [ ] Keine wichtigen Komponenten in "Uncategorized"

---

‚úÖ **Vollst√§ndige Figma-Erfassung mit intelligenter Kategorisierung!**
